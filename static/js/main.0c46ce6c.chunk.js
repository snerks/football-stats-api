(this["webpackJsonpfootball-stats-api"]=this["webpackJsonpfootball-stats-api"]||[]).push([[0],{185:function(t,e,o){"use strict";o.r(e);var a=o(2),r=o.n(a),n=o(66),s=o.n(n),c=(o(75),o(21)),i=o.n(c),l=o(67),h=o(20),d=(o(77),o(3)),u=o(0),b=o(1),p=o(5),f=o(4),j=o(70),g=o(6),m={showTrendLines:!1,showAllDataPoints:!0,showYears:{2016:!1,2017:!1,2018:!1,2019:!1,2020:!0,2021:!0}},O=function(t){Object(p.a)(o,t);var e=Object(f.a)(o);function o(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pointsPerYear:{points2016:[],points2017:[],points2018:[],points2019:[],points2020:[],points2021:[]}};return Object(u.a)(this,o),(t=e.call(this,a)).handleShowTrendLines=function(){t.setState((function(t){var e=Object(d.a)({},t);return e.showTrendLines=!t.showTrendLines,e.showYears=Object(d.a)({},t.showYears),console.warn("handleShowTrendLines"),console.warn(JSON.stringify(e)),e}))},t.handleShowAllDataPoints=function(){t.setState((function(t){var e=Object(d.a)({},t);return e.showAllDataPoints=!t.showAllDataPoints,e.showYears=Object(d.a)({},t.showYears),console.warn("showAllDataPoints"),console.warn(JSON.stringify(e)),e}))},t.handleShowYear=function(e){t.setState((function(t){var o=Object(d.a)({},t);return o.showYears=Object(d.a)({},t.showYears),o.showYears[e]=!t.showYears[e],console.warn("handleShowYear : "+e),console.warn(JSON.stringify(o)),o}))},t.state=m,t}return Object(b.a)(o,[{key:"render",value:function(){var t=this,e="255, 0, 0",o="rgba(".concat(e,", 1)"),a="rgba(".concat(e,", 0.4)"),r="85, 85, 85",n="rgba(".concat(r,", 1)"),s="rgba(".concat(r,", 0.4)"),c="0, 100, 0",i="rgba(".concat(c,", 1)"),l="rgba(".concat(c,", 0.4)"),h="rgba(".concat("220, 220, 220",", 1)"),u="0, 0, 255",b="rgba(".concat(u,", 1)"),p="rgba(".concat(u,", 0.4)"),f="75, 192, 192",m="rgba(".concat(f,", 1)"),O="rgba(".concat(f,", 0.4)"),v="255, 165, 0",w="rgba(".concat(v,", 1)"),C="rgba(".concat(v,", 0.4)"),k={fill:!1,lineTension:.1,borderCapStyle:"butt",borderDash:[3,3],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderColor:h,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10},x={2016:[],2017:[],2018:[],2019:[],2020:[],2021:[]},y=this.props.pointsPerYear;for(var S in x)if(Object.prototype.hasOwnProperty.call(x,S))for(var D=x[S],B=0;B<y[S].length;B++){var Y=(0===B?0:D[B-1])+y[S][B];D.push(Y)}for(var T=this.state.showAllDataPoints?y[2016].length:Math.max(y[2021].length+10,12),P=[],F=0;F<T;F++){var L=F%5!==0&&1!==F&&23!==F&&46!==F||45===F?"":F.toString(10);P.push(L)}var A={labels:P,datasets:[]};if(this.state.showYears[2016]&&A.datasets&&A.datasets.push(Object(d.a)(Object(d.a)({},k),{},{label:"2016-",backgroundColor:p,borderColor:b,pointBorderColor:b,pointHoverBackgroundColor:b,data:x[2016].slice(0,T)})),this.state.showYears[2017]&&A.datasets&&A.datasets.push(Object(d.a)(Object(d.a)({},k),{},{label:"2017-",backgroundColor:s,borderColor:n,pointBorderColor:n,pointHoverBackgroundColor:n,data:x[2017].slice(0,T)})),this.state.showYears[2018]&&A.datasets&&A.datasets.push(Object(d.a)(Object(d.a)({},k),{},{label:"2018-",backgroundColor:l,borderColor:i,pointBorderColor:i,pointHoverBackgroundColor:i,data:x[2018].slice(0,T)})),this.state.showYears[2019]&&A.datasets&&A.datasets.push(Object(d.a)(Object(d.a)({},k),{},{label:"2019-",backgroundColor:l,borderColor:i,pointBorderColor:i,pointHoverBackgroundColor:i,borderDash:[],data:x[2019].slice(0,T)})),this.state.showYears[2020]&&A.datasets&&A.datasets.push(Object(d.a)(Object(d.a)({},k),{},{label:"2020-",backgroundColor:s,borderColor:n,pointBorderColor:n,pointHoverBackgroundColor:n,borderDash:[],data:x[2020].slice(0,T)})),this.state.showYears[2021]&&A.datasets&&A.datasets.push(Object(d.a)(Object(d.a)({},k),{},{label:"2021-",backgroundColor:a,borderColor:o,pointBorderColor:o,pointHoverBackgroundColor:o,borderDash:[],data:x[2021].slice(0,T),borderWidth:4})),this.state.showTrendLines){for(var N=[],H=0;H<T;H++){var E=1.61*H;N.push(E)}for(var R=[],W=0;W<T;W++){var J=1*W;R.push(J)}A.datasets&&(A.datasets.push(Object(d.a)(Object(d.a)({},k),{},{label:"Playoffs",backgroundColor:O,borderColor:m,pointBorderColor:m,pointHoverBackgroundColor:m,borderDash:[5,15],data:N})),A.datasets.push(Object(d.a)(Object(d.a)({},k),{},{label:"Relegation",backgroundColor:C,borderColor:w,pointBorderColor:w,pointHoverBackgroundColor:w,borderDash:[5,15],data:R})))}return Object(g.jsxs)("div",{style:{position:"relative",height:"80vh"},children:[Object(g.jsxs)("div",{className:"custom-control custom-checkbox",style:{margin:"10px 30px 5px 25px"},children:[Object(g.jsx)("label",{className:"custom-control-label",children:"Show: "})," ",Object(g.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1",onChange:function(){return t.handleShowTrendLines()}}),Object(g.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Trend Lines"}),Object(g.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck2",onChange:function(){return t.handleShowAllDataPoints()},checked:this.state.showAllDataPoints}),Object(g.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck2",children:"All Points"}),Object.keys(x).map((function(e){return!isNaN(+e)&&Object(g.jsxs)("div",{style:{display:"inline"},children:[Object(g.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"show".concat(e,"Checkbox"),onChange:function(){return t.handleShowYear(+e)},style:{marginLeft:"10px"},checked:t.state.showYears[e]}),Object(g.jsxs)("label",{className:"custom-control-label",htmlFor:"show".concat(e,"Checkbox"),children:[e,"-"]})]},+e)}))]}),Object(g.jsx)(j.a,{data:A,options:{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:"Points Total"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Games Played"}}]}}})]})}}]),o}(a.Component),v=function(t){var e="Bristol City"===t.homeTeam.name.full?t.homeTeam:t.awayTeam;return"loss"===e.eventOutcome?0:"win"===e.eventOutcome?3:1};var w=function(){var t=Object(a.useState)(void 0),e=Object(h.a)(t,2),o=(e[0],e[1]),r=Object(a.useState)(void 0),n=Object(h.a)(r,2),s=n[0],c=n[1];return Object(a.useEffect)((function(){(function(){var t=Object(l.a)(i.a.mark((function t(){var e,a,r,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={},2016,a=2021,r=i.a.mark((function t(a){var r,n,s,c,l,h,d,u,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(a,"-08-01"),n="".concat(a+1,"-07-31"),s=(new Date).toISOString().substr(0,10),c="https://push.api.bbci.co.uk/batch?t=%2Fdata%2Fbbc-morph-football-scores-match-list-data%2FendDate%2F".concat(n,"%2FstartDate%2F").concat(r,"%2Fteam%2F").concat("bristol-city","%2FtodayDate%2F").concat(s,"%2Fversion%2F2.4.6?timeout=5"),t.next=6,fetch(c);case 6:return l=t.sent,t.next=9,l.json();case 9:h=t.sent,d=null===h||void 0===h?void 0:h.payload[0].body.matchData[0].tournamentDatesWithEvents,u=[],b=["premier-league","championship","league-one","league-two"],d&&h.payload[0].body.matchData.forEach((function(t){Object.keys(t.tournamentDatesWithEvents).forEach((function(e){return t.tournamentDatesWithEvents[e][0].events.forEach((function(t){-1===b.indexOf(t.tournamentSlug)&&"RESULT"===t.eventProgress.status&&console.warn(t.tournamentSlug),b.indexOf(t.tournamentSlug)>-1&&"RESULT"===t.eventProgress.status&&u.push(t)}))}))})),u.sort((function(t,e){return t.startTime<e.startTime?-1:t.startTime>e.startTime?1:0})),o(u),e[a]=u.map((function(t){return v(t)})),e[a].unshift(0);case 18:case"end":return t.stop()}}),t)})),n=2016;case 5:if(!(n<=a)){t.next=10;break}return t.delegateYield(r(n),"t0",7);case 7:n++,t.next=5;break;case 10:c(e);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(g.jsxs)("div",{children:[s&&Object(g.jsx)(O,{pointsPerYear:s}),Object(g.jsx)("div",{})]})},C=function(t){t&&t instanceof Function&&o.e(3).then(o.bind(null,186)).then((function(e){var o=e.getCLS,a=e.getFID,r=e.getFCP,n=e.getLCP,s=e.getTTFB;o(t),a(t),r(t),n(t),s(t)}))};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(w,{})}),document.getElementById("root")),C()},75:function(t,e,o){},77:function(t,e,o){}},[[185,1,2]]]);
//# sourceMappingURL=main.0c46ce6c.chunk.js.map