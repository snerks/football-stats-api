(this["webpackJsonpfootball-stats-api"]=this["webpackJsonpfootball-stats-api"]||[]).push([[0],{186:function(t,e,o){"use strict";o.r(e);var a=o(2),n=o.n(a),r=o(68),s=o.n(r),c=(o(76),o(17)),l=o.n(c),i=o(8),u=o(46),d=o(13),h=o.p+"static/media/logo.6ce24c58.svg",b=(o(78),o(3)),p=o(0),f=o(1),v=o(5),m=o(4),j=o(71),g=o(6),O={showTrendLines:!1,showAllDataPoints:!0,showYears:{2016:!1,2017:!1,2018:!1,2019:!1,2020:!0,2021:!0}},w=function(t){Object(v.a)(o,t);var e=Object(m.a)(o);function o(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pointsPerYear:{points2016:[],points2017:[],points2018:[],points2019:[],points2020:[],points2021:[]}};return Object(p.a)(this,o),(t=e.call(this,a)).handleShowTrendLines=function(){t.setState((function(t){var e=Object(b.a)({},t);return e.showTrendLines=!t.showTrendLines,e.showYears=Object(b.a)({},t.showYears),console.warn("handleShowTrendLines"),console.warn(JSON.stringify(e)),e}))},t.handleShowAllDataPoints=function(){t.setState((function(t){var e=Object(b.a)({},t);return e.showAllDataPoints=!t.showAllDataPoints,e.showYears=Object(b.a)({},t.showYears),console.warn("showAllDataPoints"),console.warn(JSON.stringify(e)),e}))},t.handleShowYear=function(e){t.setState((function(t){var o=Object(b.a)({},t);return o.showYears=Object(b.a)({},t.showYears),o.showYears[e]=!t.showYears[e],console.warn("handleShowYear : "+e),console.warn(JSON.stringify(o)),o}))},t.state=O,t}return Object(f.a)(o,[{key:"render",value:function(){var t,e,o,a,n,r,s,c=this,l="255, 0, 0",i="rgba(".concat(l,", 1)"),u="rgba(".concat(l,", 0.4)"),d="85, 85, 85",h="rgba(".concat(d,", 1)"),p="rgba(".concat(d,", 0.4)"),f="0, 100, 0",v="rgba(".concat(f,", 1)"),m="rgba(".concat(f,", 0.4)"),O="rgba(".concat("220, 220, 220",", 1)"),w="0, 0, 255",x="rgba(".concat(w,", 1)"),k="rgba(".concat(w,", 0.4)"),C="75, 192, 192",y="rgba(".concat(C,", 1)"),S="rgba(".concat(C,", 0.4)"),T="255, 165, 0",N="rgba(".concat(T,", 1)"),D="rgba(".concat(T,", 0.4)"),B={fill:!1,lineTension:.1,borderCapStyle:"butt",borderDash:[3,3],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderColor:O,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10},P={2016:[],2017:[],2018:[],2019:[],2020:[],2021:[]},Y=this.props.pointsPerYear;for(var F in P)if(Object.prototype.hasOwnProperty.call(P,F)){var L=P[F];if(Y[F])for(var A=0;A<Y[F].length;A++){var E=(0===A?0:L[A-1])+Y[F][A];L.push(E)}}for(var H=this.state.showAllDataPoints?Math.max((null===(t=Y[2016])||void 0===t?void 0:t.length)||0,(null===(e=Y[2017])||void 0===e?void 0:e.length)||0,(null===(o=Y[2018])||void 0===o?void 0:o.length)||0,(null===(a=Y[2019])||void 0===a?void 0:a.length)||0,(null===(n=Y[2020])||void 0===n?void 0:n.length)||0,(null===(r=Y[2021])||void 0===r?void 0:r.length)||0):Math.max(((null===(s=Y[2021])||void 0===s?void 0:s.length)||0)+10,12),I=[],J=0;J<H;J++){var R=J%5!==0&&1!==J&&23!==J&&46!==J||45===J?"":J.toString(10);I.push(R)}var W={labels:I,datasets:[]};if(this.state.showYears[2016]&&W.datasets&&W.datasets.push(Object(b.a)(Object(b.a)({},B),{},{label:"2016-",backgroundColor:k,borderColor:x,pointBorderColor:x,pointHoverBackgroundColor:x,data:P[2016].slice(0,H)})),this.state.showYears[2017]&&W.datasets&&W.datasets.push(Object(b.a)(Object(b.a)({},B),{},{label:"2017-",backgroundColor:p,borderColor:h,pointBorderColor:h,pointHoverBackgroundColor:h,data:P[2017].slice(0,H)})),this.state.showYears[2018]&&W.datasets&&W.datasets.push(Object(b.a)(Object(b.a)({},B),{},{label:"2018-",backgroundColor:m,borderColor:v,pointBorderColor:v,pointHoverBackgroundColor:v,data:P[2018].slice(0,H)})),this.state.showYears[2019]&&W.datasets&&W.datasets.push(Object(b.a)(Object(b.a)({},B),{},{label:"2019-",backgroundColor:m,borderColor:v,pointBorderColor:v,pointHoverBackgroundColor:v,borderDash:[],data:P[2019].slice(0,H)})),this.state.showYears[2020]&&W.datasets&&W.datasets.push(Object(b.a)(Object(b.a)({},B),{},{label:"2020-",backgroundColor:p,borderColor:h,pointBorderColor:h,pointHoverBackgroundColor:h,borderDash:[],data:P[2020].slice(0,H)})),this.state.showYears[2021]&&W.datasets&&W.datasets.push(Object(b.a)(Object(b.a)({},B),{},{label:"2021-",backgroundColor:u,borderColor:i,pointBorderColor:i,pointHoverBackgroundColor:i,borderDash:[],data:P[2021].slice(0,H),borderWidth:4})),this.state.showTrendLines){for(var M=[],U=0;U<H;U++){var V=1.61*U;M.push(V)}for(var z=[],G=0;G<H;G++){var Z=1*G;z.push(Z)}W.datasets&&(W.datasets.push(Object(b.a)(Object(b.a)({},B),{},{label:"Playoffs",backgroundColor:S,borderColor:y,pointBorderColor:y,pointHoverBackgroundColor:y,borderDash:[5,15],data:M})),W.datasets.push(Object(b.a)(Object(b.a)({},B),{},{label:"Relegation",backgroundColor:D,borderColor:N,pointBorderColor:N,pointHoverBackgroundColor:N,borderDash:[5,15],data:z})))}return Object(g.jsxs)("div",{style:{position:"relative",height:"80vh"},children:[Object(g.jsxs)("div",{className:"custom-control custom-checkbox",style:{margin:"10px 30px 5px 25px"},children:[Object(g.jsx)("label",{className:"custom-control-label",children:"Show: "})," ",Object(g.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1",onChange:function(){return c.handleShowTrendLines()}}),Object(g.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Trend Lines"}),Object(g.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck2",onChange:function(){return c.handleShowAllDataPoints()},checked:this.state.showAllDataPoints}),Object(g.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck2",children:"All Points"}),Object.keys(P).map((function(t){return!isNaN(+t)&&Object(g.jsxs)("div",{style:{display:"inline"},children:[Object(g.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"show".concat(t,"Checkbox"),onChange:function(){return c.handleShowYear(+t)},style:{marginLeft:"10px"},checked:c.state.showYears[t]}),Object(g.jsxs)("label",{className:"custom-control-label",htmlFor:"show".concat(t,"Checkbox"),children:[t,"-"]})]},+t)}))]}),Object(g.jsx)(j.a,{data:W,options:{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:"Points Total"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Games Played"}}]},plugins:{tooltip:{callbacks:{label:function(t){var e=t.dataset.label||"";return e&&(e+=": ".concat(t.raw)),e}}}}}}),!1]})}}]),o}(a.Component),x={linkText:"bristol-city",fullName:"Bristol City"},k=["premier-league","championship","league-one","league-two","scottish-premiership"];var C=function(){var t=Object(a.useState)(void 0),e=Object(d.a)(t,2),o=e[0],n=e[1],r=Object(a.useState)([]),s=Object(d.a)(r,2),c=s[0],b=s[1],p=Object(a.useState)([]),f=Object(d.a)(p,2),v=f[0],m=f[1],j=Object(a.useState)(x),O=Object(d.a)(j,2),C=O[0],y=O[1],S=Object(a.useState)(!1),T=Object(d.a)(S,2),N=T[0],D=T[1];return Object(a.useEffect)((function(){(function(){var t=Object(u.a)(l.a.mark((function t(){var e,o,a,n,r,s,c,u,d,h,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],o=[],a=0;case 3:if(!(a<k.length)){t.next=20;break}return n="https://push.api.bbci.co.uk/batch?t=/data/bbc-morph-sport-tables-data/competition/".concat(k[a],"/sport/football/version/2.0.2?timeout=5"),t.next=8,fetch(n);case 8:return r=t.sent,t.next=11,r.json();case 11:s=t.sent,c=null===s||void 0===s?void 0:s.payload[0].body.sportTables.tables[0].rows,u=c.map((function(t){return t.cells[2].td.abbrLink})),d=u.map((function(t){return t.link.split("/").slice(-1)[0]})),e.push.apply(e,Object(i.a)(u)),o.push.apply(o,Object(i.a)(d));case 17:a++,t.next=3;break;case 20:h=e.map((function(t){if(void 0!==t)return{linkText:t.link.split("/").slice(-1)[0],fullName:t.text}})),o.sort(),b(o),(p=h.filter((function(t){return void 0!==t}))).sort((function(t,e){return void 0===t||void 0===e?0:t.fullName<e.fullName?-1:t.fullName>e.fullName?1:0})),m(p);case 26:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){(function(){var t=Object(u.a)(l.a.mark((function t(){var e,o,a,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:D(!0),e=function(t){var e=t.homeTeam.name.full===C.fullName?t.homeTeam:t.awayTeam,o=t.homeTeam.name.full!==C.fullName?t.homeTeam:t.awayTeam;if("LIVE"===t.eventProgress.status){var a=e.scores.score,n=o.scores.score;return a<n?0:a>n?3:1}return"loss"===e.eventOutcome?0:"win"===e.eventOutcome?3:1},o={},a=2016,2021,r=l.a.mark((function t(a){var r,s,c,i,u,d,h,b,p,f,v,m,j,g,O,w;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat(a,"-07-31"),i="".concat(a+1,"-07-30"),u=(new Date).toISOString().substr(0,10),d="%2Fdata%2Fbbc-morph-football-scores-match-list-data%2FendDate%2F".concat(i,"%2FstartDate%2F").concat(c,"%2Fteam%2F").concat(C.linkText,"%2FtodayDate%2F").concat(u,"%2Fversion%2F2.4.6?timeout=5"),h="https://push.api.bbci.co.uk/batch?t=".concat(d),t.next=7,fetch(h);case 7:return b=t.sent,t.next=10,b.json();case 10:if(p=t.sent,v=null===(f=p)||void 0===f?void 0:f.payload,m=v&&v.length>0?v[0]:null,j=null===m||void 0===m||null===(r=m.body)||void 0===r?void 0:r.matchData,g=j&&j.length>0?null===(s=j[0])||void 0===s?void 0:s.tournamentDatesWithEvents:null,O=[],(w=[].concat(k)).push("national-league"),g)f.payload[0].body.matchData.forEach((function(t){Object.keys(t.tournamentDatesWithEvents).forEach((function(e){return t.tournamentDatesWithEvents[e][0].events.forEach((function(t){-1===w.indexOf(t.tournamentSlug)&&console.warn("".concat(t.tournamentSlug)),"RESULT"!==t.eventProgress.status&&console.warn("".concat(t.tournamentSlug," : ").concat(t.eventProgress.status)),w.indexOf(t.tournamentSlug)>-1&&("RESULT"===t.eventProgress.status||"LIVE"===t.eventProgress.status)&&O.push(t)}))}))}));else try{console.warn(JSON.stringify(p,null,2))}catch(l){console.warn(l)}O.sort((function(t,e){return t.startTime<e.startTime?-1:t.startTime>e.startTime?1:0})),o[a]=O.map((function(t){return e(t)})),o[a].unshift(0),2020===a&&(n(o),D(!1));case 24:case"end":return t.stop()}}),t)})),s=2021;case 7:if(!(s>=a)){t.next=12;break}return t.delegateYield(r(s),"t0",9);case 9:s--,t.next=7;break;case 12:n(o),D(!1);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[C]),Object(g.jsxs)("div",{children:[c&&Object(g.jsx)("div",{style:{textAlign:"center"},children:Object(g.jsx)("select",{name:"teamNameInfoItems",id:"teamNameInfoItems",onChange:function(t){var e,o=t.target.value,a={linkText:o,fullName:(null===(e=v.find((function(t){return(null===t||void 0===t?void 0:t.linkText)===o})))||void 0===e?void 0:e.fullName)||"NA"};y(a)},style:{fontSize:"20pt"},value:C.linkText,children:v.map((function(t){return Object(g.jsx)("option",{value:null===t||void 0===t?void 0:t.linkText,children:null===t||void 0===t?void 0:t.fullName},(null===t||void 0===t?void 0:t.linkText)||1)}))})}),o&&!N&&Object(g.jsx)(w,{pointsPerYear:o}),(!o||N)&&Object(g.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",border:"3px solid white"},children:Object(g.jsx)("img",{src:h,className:"App-logo",alt:"logo"})}),Object(g.jsx)("div",{})]})},y=function(t){t&&t instanceof Function&&o.e(3).then(o.bind(null,187)).then((function(e){var o=e.getCLS,a=e.getFID,n=e.getFCP,r=e.getLCP,s=e.getTTFB;o(t),a(t),n(t),r(t),s(t)}))};s.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(C,{})}),document.getElementById("root")),y()},76:function(t,e,o){},78:function(t,e,o){}},[[186,1,2]]]);
//# sourceMappingURL=main.5edf5842.chunk.js.map